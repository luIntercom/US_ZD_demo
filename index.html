<!doctype html>
<html>
  <head>
    <title>Fin ZD demo</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      const names = [
        "James", "Tess", "Mike", "Sarah", "Luis", 
        "Emma", "Oliver", "Sophia", "Liam", "Ava",
        "Noah", "Isabella", "Ethan", "Mia", "Lucas"
      ];

      function generateUserId() {
        return Math.floor(Math.random() * 90000000) + 10000000;
      }

      function generateEmail(name) {
        return `${name.toLowerCase()}@zd_demo@email.com`;
      }

      const users = names.map(name => ({
        user_id: generateUserId().toString(),
        email: generateEmail(name),
        name: name
      }));

      let currentUserIndex = 0;

      function reset() {
        const cookies = document.cookie.split(";");
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i];
            const eqPos = cookie.indexOf("=");
            const name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
            document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/";
        }
        window.location.reload();
      }

      function loadNewUser() {
        currentUserIndex = (currentUserIndex + 1) % users.length;
        const newUser = users[currentUserIndex];
        
        if (window.Intercom) {
          window.Intercom('shutdown');
        }

        window.intercomSettings = {
          api_base: "https://api-iam.intercom.io",
          app_id: "z1n0atmw",
          user_id: newUser.user_id,
          email: newUser.email,
          name: newUser.name
        };

        setTimeout(() => {
          if (window.Intercom) {
            window.Intercom('boot', window.intercomSettings);
          }
          updateUserDisplay();
        }, 100);
      }

      function updateUserDisplay() {
        const display = document.getElementById('current-user');
        if (display) {
          display.textContent = `Current User: ${window.intercomSettings.name} (${window.intercomSettings.email})`;
        }
      }

      window.onload = function() {
        updateUserDisplay();
      };
    </script>
  </head>
  <body class="p-6 flex flex-col flex-1 items-center justify-center min-h-screen bg-cover" style="background-image: url('https://downloads.intercomcdn.com/i/o/1051523575/8c16c6bb97ae791131ead20c/blur.jpg')">
    <div class="flex flex-col space-y-2 items-center">
      <div>
        <img src="https://static.intercomassets.com/assets/default-avatars/fin/128-6a5eabbb84cc2b038b2afc6698ca0a974faf7adc9ea9f0fb3c3e78ac12543bc5.png" height="50" width="50">
      </div>
      <div id="current-user" class="text-white bg-black bg-opacity-50 px-4 py-2 rounded text-sm"></div>
      <div class="flex space-x-2">
        <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition" onclick="loadNewUser()">New User</button>
        <button class="bg-black text-white px-4 py-2 rounded hover:bg-opacity-75 transition" onclick="reset()">Reset</button>
      </div>
    </div>

<script>
  window.intercomSettings = {
    api_base: "https://api-iam.intercom.io",
    app_id: "z1n0atmw",
    user_id: users[0].user_id,
    email: users[0].email,
    name: users[0].name
  };
</script>
<script>
  (function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/z1n0atmw';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(document.readyState==='complete'){l();}else if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>
    
<!-- Start of d3v-mdlsolutions Zendesk Widget script -->
<script id="ze-snippet" src="https://static.zdassets.com/ekr/snippet.js?key=64e085db-b7a2-4e29-911a-1987b55892bf"> </script>
<!-- End of d3v-mdlsolutions Zendesk Widget script -->  
  </body>
</html>
